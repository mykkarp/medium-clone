import React from 'react';
import Snackbar from '@material-ui/core/Snackbar';
import Slide from '@material-ui/core/Slide';
import LangsTranslate from "LangsTranslate/LangsTranslate.json";

function TransitionUp(props) {
  return <Slide {...props} direction="up" />;
}

export default function NotAuthAlert(props) {
  const [open, setOpen] = React.useState(false);
  const [transition, setTransition] = React.useState(undefined);
  const loginFirstTranslate = LangsTranslate[props.currentLang].userPage.userInfo.loginFirst;

  const handleClick = (Transition) => () => {
    setTransition(() => Transition);
    setOpen(true);
  };

  const handleClose = () => {
    setOpen(false);
  };

  return (
    <>
      {localStorage.getItem("currentUserId") ?
        props.children :
        <>
          {React.cloneElement(props.children, { onClick: handleClick(TransitionUp) })}
          <Snackbar
            severity="success"
            open={open}
            onClose={handleClose}
            TransitionComponent={transition}
            message={loginFirstTranslate}
            key={transition ? transition.name : ''}
          />
        </>}
    </>
  );
}
