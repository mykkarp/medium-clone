import React, { useState, useEffect } from 'react';
import { convertToRaw, ContentState } from 'draft-js';
import { Editor } from 'react-draft-wysiwyg';
import draftToHtml from 'draftjs-to-html';
import htmlToDraft from 'html-to-draftjs';
import 'react-draft-wysiwyg/dist/react-draft-wysiwyg.css';

const TextEditor = ({ defaultHTML, setArticleText }) => {

  let _contentState = ContentState.
    createFromBlockArray(htmlToDraft(defaultHTML));
  const raw = convertToRaw(_contentState);
  const [contentState, setContentState] = useState(raw);

  useEffect(() => {
    setArticleText(draftToHtml(contentState));
  }, [contentState, defaultHTML])
  return (
    <Editor
      defaultContentState={contentState}
      onContentStateChange={setContentState}
    />
  )
}

export default TextEditor;